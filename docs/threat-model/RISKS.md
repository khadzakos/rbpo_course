# RISKS — Реестр рисков для Chore Tracker API

| RiskID | Описание | Связь (F/NFR) | L | I | Risk | Стратегия | Владелец | Срок | Критерий закрытия |
|--------|----------|---------------|---|---|------|-----------|----------|------|-------------------|
| R1 | SQL Injection через невалидированные запросы | F8, NFR-02 | 4 | 5 | 20 | Снизить | Dev Team | 2 недели | SAST scan показывает 0 SQL injection уязвимостей |
| R2 | Утечка PII данных через API ответы | F1, NFR-05 | 3 | 5 | 15 | Снизить | Security Team | 1 неделя | Data leak testing не выявляет утечек PII |
| R3 | DoS атаки через перегрузку API | F1, NFR-04 | 4 | 4 | 16 | Снизить | DevOps Team | 1 неделя | Rate limiting настроен: ≤100 req/min на IP |
| R4 | Несанкционированный доступ через слабую аутентификацию | F1, NFR-01 | 3 | 5 | 15 | Снизить | Security Team | 2 недели | JWT аутентификация реализована с TTL≤15min |
| R5 | Подделка пользовательских данных | UserService, NFR-03 | 3 | 4 | 12 | Снизить | Dev Team | 1 неделя | Pydantic валидация покрывает 100% входных данных |
| R6 | Утечка данных из базы данных | Database, NFR-05 | 2 | 5 | 10 | Снизить | DBA Team | 3 недели | Database encryption включена, backup зашифрованы |
| R7 | Перегрузка базы данных запросами | F8, NFR-04 | 3 | 3 | 9 | Снизить | DBA Team | 2 недели | Connection pooling настроен, query optimization выполнена |
| R8 | Утечка API метаданных через заголовки | API Gateway, NFR-06 | 4 | 2 | 8 | Снизить | DevOps Team | 1 неделя | Security headers настроены (HSTS, CSP, X-Frame-Options) |
| R9 | Модификация конфигурации API | API Gateway, NFR-06 | 2 | 4 | 8 | Снизить | DevOps Team | 1 неделя | Configuration as Code, версионирование настроено |
| R10 | Несанкционированный доступ к БД | Database, NFR-01 | 2 | 5 | 10 | Снизить | DBA Team | 2 недели | Database access control настроен, принцип least privilege |

## Приоритеты рисков

### Критические (Risk ≥ 15)
- **R1**: SQL Injection (20) - **Quick Win**: Внедрить параметризованные запросы
- **R2**: Утечка PII (15) - **Quick Win**: Настроить фильтрацию ответов
- **R3**: DoS атаки (16) - **Quick Win**: Настроить rate limiting
- **R4**: Слабая аутентификация (15) - **Quick Win**: Внедрить JWT токены

### Высокие (Risk 10-14)
- **R5**: Подделка пользовательских данных (12)
- **R6**: Утечка данных из БД (10)
- **R10**: Несанкционированный доступ к БД (10)

### Средние (Risk 5-9)
- **R7**: Перегрузка БД (9)
- **R8**: Утечка API метаданных (8)
- **R9**: Модификация конфигурации (8)

## Quick Wins (Быстрые выигрыши)

1. **R8** - Настройка security headers (1 неделя, низкая стоимость)
2. **R2** - Фильтрация PII в ответах (1 неделя, средняя стоимость)
3. **R3** - Rate limiting (1 неделя, низкая стоимость)
4. **R5** - Pydantic валидация (1 неделя, низкая стоимость)

## Связь с NFR

- **NFR-01**: R4, R10 (Аутентификация и авторизация)
- **NFR-02**: R1 (SQL Injection защита)
- **NFR-03**: R5 (Валидация входных данных)
- **NFR-04**: R3, R7 (Rate limiting)
- **NFR-05**: R2, R6 (Шифрование данных)
- **NFR-06**: R8, R9 (Безопасные заголовки HTTP)
